# About
NokDoc CLI Tool built to interact with Nokia (fALU) [documentation portal](https://support.alcatel-lucent.com) in a CLI fashion.

It exposes to a user a set of commands and options for the following
high-level tasks:
- Building a self-contained HTML document with a table of all the documentation
for a particular product/release;
- Download a zipped collection with actual documents;
- Querying the doc server about available releases.

HTML files generated by this tool additionally integrated into the so-called
[NokDoc Lib](https://nokdoc.github.io).

# How to install NokDoc CLI Tool
A proper way to install Python CLI tools would be by using virtual environment.
One of the main reasons to do so is to keep your system-packages clean and consistent.

Thanks to [pipsi](https://github.com/mitsuhiko/pipsi) tool we can now install python cli tools in one click without manually creating and linking vevns.

If you do not care about your system-wide python packages you can skip pipsi installation and install NokDoc with plain pip: `pip install nokdoc` (just make sure to use pip for python3)

## Installing pipsi
You have to have `virtualenv` package installed to install pipsi. Then use installation script provided via pipsi github package
```shell
curl https://raw.githubusercontent.com/mitsuhiko/pipsi/master/get-pipsi.py | python3
```
Pay attention to the python interpreter version after the pipe. NokDoc has been tested with `python3`  that is why python3 interpreter should be used to install pipsi. Still, it works with `python 2.7` but not tested.

Also ensure that you have met pipsi requirement to add additional path to yout `PATH` env. variable. Pipsi will tell you what to do in the end of its installation process.

## Installing NokDoc
Once you have pipsi installed you can safely install nokdoc:
```
pipsi install nokdoc
```

# How to use NokDoc
NokDoc has built-in help:
```
rdodin@vbox:~$ nokdoc
Usage: nokdoc [OPTIONS] COMMAND [ARGS]...

  NokDoc CLI Tool is exposing a set of commands to interact with Nokia
  documentation portal. It offers CLI experience for tasks like - getting
  links to the docs aggregated into HTML file - downloading docs collections
  automatically

  It works for authorized users and guests.

Options:
  -l, --login TEXT  Put in your login to get access to thedocumentation
                    requiring authorization
  -p, --proxy TEXT
  --help            Show this message and exit.

Commands:
  getdocs   Downloads documentation collection for a...
  getlinks  Gets a single HTML file with links to the...
  showrels  Lists all available releases for a given...
```
Let's explore what can be done with NokDoc.
### Guest access and logged users
Nokia documentation falls into to categories: one that can be accessed without registration and other that will ask for a login.
NokDoc allows a user to work as a guest (i.e. non logged in) and in authorized mode.

Unathorized users will be able to receive only those documents which are opened.

If you have a login to support.alcatel-lucent.com then to run NokDoc commands in the authorized mode simply pass your login as so:
```
nokdoc -l <username> COMMAND [OPTIONS]
```
This will prompt for your password and authorize you within the documentation server.
## Getting HTML file with links to documentation
One feature of NokDoc is to build HTML files with direct links to documentation articles for further reference.
```
nokdoc -l <username> getlinks -p <product_name> -r <release>
```
Each command has its own help section with optional parameters explained:
```
rdodin@vbox:~$ nokdoc getlinks --help
Usage: nokdoc getlinks [OPTIONS]

  Gets a single HTML file with links to the documetation elements for a
  given product.

Options:
  -p, --product [1350oms|5620sam|7210sas|7450ess|7705sar|7750sr|7850-8vsg|7850vsa|7850vsg|7950xrs|nuage|nuage-vns|nuage-vsp|vsr]
                                  [required]
  -r, --release TEXT              Release version, use "showrels" command to
                                  list them
  -f, --format [pdf|html|zip]     Specify documentation format to fetch.If
                                  unspecified -> all types will be collected.
  -s, --sort [title|issue_date]   Choose sorting key. Defaults to "title"
  -v, --verbose TEXT              Make a Doc talk
  --help                          Show this message and exit.
```

## Downloading documetation collection
Another feature of NokDoc is being able to generate request to the documentation server for collection generation and automatically download it once it is available.
This is right now supported only for nuage products.
```
# for example
nokdoc -l rdodin getdocs -p nuage-vns -r 4.0.r4 -f pdf
```
Again, options can be explored via built-in help page:
```
rdodin@vbox:~$ nokdoc getdocs --help
Usage: nokdoc getdocs [OPTIONS]

  Downloads documentation collection for a given product family. Optionally
  specify release version to fetch OPtionally specify format of the docs to
  fetch

  Currently supported products: nuage, nuage-vsp, nuage-vns

Options:
  -p, --product [1350oms|5620sam|7210sas|7450ess|7705sar|7750sr|7850-8vsg|7850vsa|7850vsg|7950xrs|nuage|nuage-vns|nuage-vsp|vsr]
                                  [required]
  -r, --release TEXT              Release version, use "showrels" command to
                                  list them
  -f, --format [pdf|html|zip]     Specify documentation format to fetch.If
                                  unspecified -> all types will be collected.
  --help                          Show this message and exit.
```
